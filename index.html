<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>TuanKiet88</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: radial-gradient(circle, #111, #000);
      color: white;
      text-align: center;
      margin: 0;
      padding: 0;
    }
    h1 {
      margin-top: 20px;
      color: gold;
      text-shadow: 0 0 10px red;
    }
    #game-area {
      margin-top: 20px;
    }
    .dice {
      font-size: 60px;
      animation: spin 0.5s infinite linear;
    }
    @keyframes spin {
      from { transform: rotate(0deg); }
      to { transform: rotate(360deg); }
    }
    button {
      padding: 10px 20px;
      margin: 5px;
      font-size: 18px;
      background-color: #222;
      color: white;
      border: 2px solid gold;
      cursor: pointer;
    }
    .bet-options button {
      background-color: #333;
    }
    #top-users {
      margin-top: 20px;
    }
  </style>
</head>
<body>
  <audio autoplay loop>
    <source src="casino.mp3" type="audio/mpeg">
    Tr√¨nh duy·ªát kh√¥ng h·ªó tr·ª£ ph√°t nh·∫°c.
  </audio>

  <h1>üé≤ TuanKiet88üé≤</h1>

  <div id="auth">
    <input id="username" placeholder="T√™n ƒëƒÉng nh·∫≠p" />
    <button onclick="register()">ƒêƒÉng k√Ω</button>
    <button onclick="login()">ƒêƒÉng nh·∫≠p</button>
  </div>

  <div id="game-area" style="display:none">
    <h2 id="welcome"></h2>
    <p>S·ªë d∆∞: <span id="balance">0</span> VNƒê</p>

    <div class="bet-options">
      <button onclick="placeBet(1000)">1000</button>
      <button onclick="placeBet(5000)">5000</button>
      <button onclick="placeBet(10000)">10000</button>
      <button onclick="placeBet(100000)">100000</button>
      <button onclick="placeBet(500000)">500000</button>
      <button onclick="allIn()">All-In</button>
    </div>

    <div style="margin:10px;">
      <button onclick="startRound()">üé≤ M·ªü b√°t üé≤</button>
    </div>

    <div id="dice-result">
      <div class="dice" id="dice">üé≤</div>
      <p id="result-text"></p>
    </div>

    <div id="top-users">
      <h3>Top Ng∆∞·ªùi Ch∆°i</h3>
      <ol id="top-list"></ol>
    </div>
  </div>

  <script>
    let users = JSON.parse(localStorage.getItem("users") || "{}");
    let currentUser = null;

    function saveUsers() {
      localStorage.setItem("users", JSON.stringify(users));
    }

    function register() {
      const name = document.getElementById("username").value;
      if (users[name]) return alert("T√™n ƒë√£ t·ªìn t·∫°i!");
      users[name] = { money: 50000 };
      saveUsers();
      alert("ƒêƒÉng k√Ω th√†nh c√¥ng!");
    }

    function login() {
      const name = document.getElementById("username").value;
      if (!users[name]) return alert("Kh√¥ng t√¨m th·∫•y t√†i kho·∫£n!");
      currentUser = name;
      document.getElementById("auth").style.display = "none";
      document.getElementById("game-area").style.display = "block";
      updateUI();
    }

    function updateUI() {
      document.getElementById("welcome").innerText = "Xin ch√†o, " + currentUser;
      document.getElementById("balance").innerText = users[currentUser].money.toLocaleString();
      updateTopList();
    }

    function updateTopList() {
      const sorted = Object.entries(users).sort((a, b) => b[1].money - a[1].money);
      document.getElementById("top-list").innerHTML = sorted.slice(0, 5).map(
        ([name, data]) => `<li>${name}: ${data.money.toLocaleString()} VNƒê</li>`
      ).join("");
    }

    function placeBet(amount) {
      if (!currentUser) return;
      if (users[currentUser].money < amount) return alert("Kh√¥ng ƒë·ªß ti·ªÅn!");
      users[currentUser].money -= amount;
      users[currentUser].bet = amount;
      saveUsers();
      updateUI();
      alert("ƒê√£ ƒë·∫∑t c∆∞·ª£c: " + amount.toLocaleString() + " VNƒê");
    }

    function allIn() {
      placeBet(users[currentUser].money);
    }

    function startRound() {
      if (!users[currentUser].bet) return alert("B·∫°n ch∆∞a ƒë·∫∑t c∆∞·ª£c!");
      const result = Math.floor(Math.random() * 6 + 1) + Math.floor(Math.random() * 6 + 1);
      const isTai = result >= 11;
      const win = Math.random() > 0.5;
      document.getElementById("dice").innerText = "üé≤üé≤";
      setTimeout(() => {
        document.getElementById("dice").classList.remove("dice");
        document.getElementById("dice").innerText = result;
        if (win) {
          users[currentUser].money += users[currentUser].bet * 2;
          document.getElementById("result-text").innerText = "B·∫°n th·∫Øng! K·∫øt qu·∫£: " + result + " (" + (isTai ? "T√†i" : "X·ªâu") + ")";
        } else {
          document.getElementById("result-text").innerText = "B·∫°n thua! K·∫øt qu·∫£: " + result + " (" + (isTai ? "T√†i" : "X·ªâu") + ")";
        }
        delete users[currentUser].bet;
        saveUsers();
        updateUI();
      }, 2000);
    }
  </script>
</body>
</html>
